function openPopup(){document.querySelector("body").classList.add("popup__open"),document.querySelector(".popup").classList.add("popup__open")}function closePopup(){document.querySelector("body").classList.remove("popup__open"),document.querySelector(".popup").classList.remove("popup__open")}async function postData(e="",o={}){const t=await fetch(e,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(o)});return await t.json()}document.querySelectorAll(".popup__button").forEach(e=>{e.addEventListener("click",e=>{openPopup()})}),document.querySelectorAll(".popup__close").forEach(e=>{e.addEventListener("click",e=>{closePopup()})}),document.querySelector(".popup").addEventListener("click",e=>{e.target.classList.contains("popup")&&closePopup()});let flag=!1;document.onscroll=(()=>{0==flag&&(flag=!0,document.querySelectorAll("iframe").forEach(e=>{e.src=e.dataset.src}))}),document.querySelectorAll('input[type="tel"]').forEach(e=>{IMask(e,{mask:"+{7} (000) 000-00-00"})}),Object.entries(document.forms).forEach(e=>{let o=e[1];o.addEventListener("submit",e=>{e.preventDefault();let t={};o.querySelectorAll("input").forEach(e=>{t[e.name]=e.value}),postData("/handler",t).then(e=>{let t=e.message;console.log(t),o.querySelector(".message_text").innerHTML=t,o.querySelector(".message_text").classList.remove("none"),setTimeout(()=>{o.querySelector(".message_text").classList.add("none"),o.querySelectorAll("input").forEach(e=>{e.value=""}),closePopup()},1500)})})});